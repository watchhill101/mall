<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tokenè¡Œä¸ºæµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
        }
        .section {
            border: 1px solid #ccc;
            margin: 20px 0;
            padding: 20px;
            border-radius: 5px;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        .danger {
            background: #dc3545;
        }
        .danger:hover {
            background: #c82333;
        }
        .info {
            background: #17a2b8;
        }
        .info:hover {
            background: #138496;
        }
        pre {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>ğŸ” Tokenè¡Œä¸ºæµ‹è¯•å·¥å…·</h1>
    
    <div class="section">
        <h3>ğŸ“‹ å½“å‰çŠ¶æ€</h3>
        <div id="status"></div>
        <button onclick="checkStatus()">åˆ·æ–°çŠ¶æ€</button>
    </div>
    
    <div class="section">
        <h3>ğŸ§ª æµ‹è¯•æ“ä½œ</h3>
        <button onclick="setTestTokens()">è®¾ç½®æµ‹è¯•Token</button>
        <button class="danger" onclick="clearAccessToken()">åˆ é™¤Access Token</button>
        <button class="danger" onclick="clearRefreshToken()">åˆ é™¤Refresh Token</button>
        <button class="danger" onclick="clearAllTokens()">æ¸…é™¤æ‰€æœ‰Token</button>
        <button class="info" onclick="openNewTab()">æ‰“å¼€æ–°æ ‡ç­¾é¡µ</button>
    </div>
    
    <div class="section">
        <h3>ğŸ“ è¯´æ˜</h3>
        <ul>
            <li><strong>è®¾ç½®æµ‹è¯•Token</strong>: åœ¨localStorageä¸­è®¾ç½®ç¤ºä¾‹token</li>
            <li><strong>åˆ é™¤Token</strong>: åˆ é™¤æŒ‡å®šçš„tokenå¹¶è§‚å¯Ÿåº”ç”¨ååº”</li>
            <li><strong>æ‰“å¼€æ–°æ ‡ç­¾é¡µ</strong>: æµ‹è¯•è·¨æ ‡ç­¾é¡µçš„tokenåŒæ­¥</li>
            <li><strong>æœŸæœ›è¡Œä¸º</strong>: Tokenåˆ é™¤ååº”è¯¥è‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µ</li>
        </ul>
    </div>

    <script>
        function checkStatus() {
            const accessToken = localStorage.getItem('ACCESS-TOKEN');
            const refreshToken = localStorage.getItem('REFRESH-TOKEN');
            
            const status = document.getElementById('status');
            status.innerHTML = `
                <pre>
Access Token: ${accessToken ? 'âœ… å­˜åœ¨ (' + accessToken.substring(0, 30) + '...)' : 'âŒ ä¸å­˜åœ¨'}
Refresh Token: ${refreshToken ? 'âœ… å­˜åœ¨ (' + refreshToken.substring(0, 30) + '...)' : 'âŒ ä¸å­˜åœ¨'}
å½“å‰æ—¶é—´: ${new Date().toLocaleString()}
å½“å‰URL: ${window.location.href}
                </pre>
            `;
        }
        
        function setTestTokens() {
            const testAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.test.access.token';
            const testRefreshToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.test.refresh.token';
            
            localStorage.setItem('ACCESS-TOKEN', testAccessToken);
            localStorage.setItem('REFRESH-TOKEN', testRefreshToken);
            
            alert('âœ… æµ‹è¯•Tokenå·²è®¾ç½®');
            checkStatus();
        }
        
        function clearAccessToken() {
            localStorage.removeItem('ACCESS-TOKEN');
            alert('ğŸ—‘ï¸ Access Tokenå·²åˆ é™¤');
            checkStatus();
        }
        
        function clearRefreshToken() {
            localStorage.removeItem('REFRESH-TOKEN');
            alert('ğŸ—‘ï¸ Refresh Tokenå·²åˆ é™¤');
            checkStatus();
        }
        
        function clearAllTokens() {
            localStorage.removeItem('ACCESS-TOKEN');
            localStorage.removeItem('REFRESH-TOKEN');
            alert('ğŸ—‘ï¸ æ‰€æœ‰Tokenå·²åˆ é™¤');
            checkStatus();
        }
        
        function openNewTab() {
            window.open(window.location.href, '_blank');
        }
        
        // ç›‘å¬storageäº‹ä»¶
        window.addEventListener('storage', function(e) {
            if (e.key === 'ACCESS-TOKEN' || e.key === 'REFRESH-TOKEN') {
                console.log('ğŸ”„ æ£€æµ‹åˆ°localStorageå˜åŒ–:', e.key, e.newValue);
                checkStatus();
            }
        });
        
        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥çŠ¶æ€
        window.onload = function() {
            checkStatus();
        };
    </script>
</body>
</html>
